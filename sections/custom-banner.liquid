{% schema %}
{
  "name": "Custom Banner",
  "settings": [
    {
      "type": "image_picker",
      "id": "desktop_image",
      "label": "Desktop Background Image"
    },
    {
      "type": "image_picker",
      "id": "mobile_image",
      "label": "Mobile Background Image"
    },
    {
      "type": "textarea",
      "id": "text_content",
      "label": "Content Text"
    },
    {
      "type": "text",
      "id": "link_text",
      "label": "Link Text",
      "default": "Click Here"
    },
    {
      "type": "url",
      "id": "link_url",
      "label": "Link URL"
    },
    {
      "type": "range",
      "id": "text_font_size",
      "label": "Text Font Size (px)",
      "min": 10,
      "max": 100,
      "step": 1,
      "default": 16
    },
    {
      "type": "range",
      "id": "link_font_size",
      "label": "Link Text Font Size (px)",
      "min": 10,
      "max": 100,
      "step": 1,
      "default": 16
    },
    {
  "type": "color",
  "id": "arrow_color",
  "label": "Arrow Color",
  "default": "#ffffff"
},

  {
  "type": "color",
  "id": "text_color",
  "label": "Text Color",
  "default": "#ffffff"
}

  ],
  "presets": [
    {
      "name": "Custom Banner",
      "category": "Custom"
    }
  ]
}
{% endschema %}


<style>
  body, html {
    height: 100%;
    scroll-behavior: smooth;
  }

  .shopify-section-banner {
    height: 120vh;
    padding: 0;
    margin: 0;
    background-size: cover;
    background-position: center;
  }

  .container-box {
    position: relative;
    height: 100%;
  }

  .content-box {
    width: 100%;
    margin: 0 auto;
    padding: 20px;
    position: absolute;
    bottom: 0;
    color: {{ section.settings.text_color }};
  }

  h1 {
    font-size: {{ section.settings.text_font_size }}px;
    color: {{ section.settings.text_color }} !important;
    font-family: 'MCM FAVORIT BOLD EXTENDED';
    font-weight: unset !important;
    text-transform: uppercase;
        letter-spacing: normal;
        line-height: 1.2;

  }

  .banner_link {
    font-size: {{ section.settings.link_font_size }}px;
    color: {{ section.settings.text_color }};
    text-decoration: none;
    font-family: 'MCM FAVORIT BOLD EXTENDED', sans-serif;
    font-weight: unset !important;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    text-transform: uppercase;
    letter-spacing: normal;
        line-height: 1.2;


  }


@media (max-width: 551px){
  h1, .banner_link{
    font-size: 14px;
  }
}

  

  /* Dynamic background images using section.id */
  #shopify-section-{{ section.id }}.shopify-section-banner {
    background-image: url({{ section.settings.desktop_image | img_url: 'master' }});
  }

  /* tablet background image */
  @media  (min-width:552px and max-width:768px)) {
    #shopify-section-{{ section.id }}.shopify-section-banner {
      background-image: url({{ section.settings.mobile_image | img_url: 'master' }});
      max-height: 130vh;
    }
    .content-box {
      padding-bottom: 60px !important;
    }
  }

        /* Mobile background image */
  @media (max-width: 551px) {
    #shopify-section-{{ section.id }}.shopify-section-banner {
      background-image: url({{ section.settings.mobile_image | img_url: 'master' }});
      max-height: 80vh;
    }
  }


        
  span.link_text:hover {
    color: {{ section.settings.text_color }};
    margin-left: 8px;
  }

  span.link_text {
    transition: margin-left 0.3s ease;
  }
</style>

<div id="shopify-section-{{ section.id }}" class="shopify-section-banner">
  <div class="container-box">
    <div class="content-box">
      <!-- Content from settings -->
      <h1>{{ section.settings.text_content }}</h1>

      <!-- Link from settings -->
      <a class="banner_link" href="{{ section.settings.link_url }}">
        <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12.129 8.24999L8.106 4.22699L9.1665 3.16649L15 8.99999L9.1665 14.8335L8.106 13.773L12.129 9.74999H3V8.24999H12.129Z" fill="#{{ section.settings.arrow_color | remove: '#' }}"/>
        </svg>
        <span class="link_text">{{ section.settings.link_text }}</span>
      </a>
    </div>
  </div>
</div>

<script>
window.addEventListener('scroll', function() {
  const containers = document.querySelectorAll('.shopify-section-banner .container-box');

  containers.forEach(function(container) {
    const contentBox = container.querySelector('.content-box');
    const containerRect = container.getBoundingClientRect();
    const containerTop = containerRect.top;
    const containerBottom = containerRect.bottom;
    const windowHeight = window.innerHeight;

    if (containerTop < windowHeight && containerBottom > windowHeight) {
      contentBox.style.position = 'fixed';
      contentBox.style.bottom = '0';
      contentBox.style.top = 'unset';
    } else if (containerBottom <= windowHeight) {
      contentBox.style.position = 'absolute';
      contentBox.style.bottom = '0';
      contentBox.style.top = 'unset';
    } else if (containerTop >= 0) {
      contentBox.style.position = 'absolute';
      contentBox.style.top = '0';
      contentBox.style.bottom = 'unset';
    }
  });

});
  
</script>

